import * as axios from 'axios';
import { config } from '../config/config';
import { AuthService } from './auth.service';

export class ProjectService {

  public constructor(private _token?: string) {
  }

  public async getAll(): Promise<any[]> {
    const authService = new AuthService();
    const token = authService.getTokenOrThrow(this._token);
    const url = `${config.serverBaseUrl}/projects/`;
    const response = await axios.default.get(url,{
      headers: {
        "cli-token": token,
      }
    });
    return response.data?.items;
  }

  public async getById(id: string): Promise<any> {
    const authService = new AuthService();
    const token = authService.getTokenOrThrow(this._token);
    const url = `${config.serverBaseUrl}/projects/${id}`;
    const response = await axios.default.get(url,{
      headers: {
        "cli-token": token,
      }
    });
    return response.data;
  }
}