import * as path from 'path';
import { JsonFileConfigService } from './json-file-config.service';

const AUTH_CONFIG_FILE = 'auth';

export class AuthConfigService {
  private _configService: JsonFileConfigService;

  public constructor() {
    this._configService = new JsonFileConfigService();
  }
  
  public get(): AuthConfig | undefined {
    const dir = path.join(this._configService.globalConfigRootFolder, AUTH_CONFIG_FILE);
    return this._configService.readJson<AuthConfig>(dir);
  }

  public set(config: AuthConfig): void {
    const dir = path.join(this._configService.globalConfigRootFolder, AUTH_CONFIG_FILE);
    this._configService.saveJson(dir, config);
  }

  public async remove() {
    const dir = path.join(this._configService.globalConfigRootFolder, AUTH_CONFIG_FILE);
    this._configService.remove(dir);
  }
}

export class AuthConfig {
  public token!: string;
  public requestToken!: string;
}