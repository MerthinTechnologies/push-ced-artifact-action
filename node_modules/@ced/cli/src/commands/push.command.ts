import * as program from 'commander';
import { PushCommandHandler } from '../command-handlers/push-command-handler';

export class PushCommand {

  public static install() {
    program
      .command('push')
      .description('Push artifact folders.')
      .option('-e, --environment <environment>', 'CED environment.')
      .option('-v, --versionName <version name>', 'Specific unpublished version where to upload the artifact. A new version will be created if no version is specified.')
      .option('-d, --draft', 'Push as draft version.')
      .action(async (options) => {
        const handler = new PushCommandHandler(options.parent?.token);
        await handler.run(options.environment, options.versionName, options.draft);
      });
  }
}